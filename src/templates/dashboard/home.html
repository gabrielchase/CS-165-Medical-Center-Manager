{% extends "base.html" %}

{% block content %}

<div style="text-align: center; margin-top: 50px">
	<a href={% url 'users:update' %}>Edit My Profile</a>
	<a href={% url 'logout' %}>Logout</a>

	<h1 class="title">Dashboard</h1>

	<p><strong>Welcome {{ current_user.email }}. 
		You are {% if current_user.is_admin %} an admin {% elif not current_user.is_admin %}a regular user {% endif %}
		</strong></p>
	</div>

	<h1>Scheduled Appointments</h1>
	<ul>
		{% for aptmt in appointments %}
			<li> 
				{{ aptmt }} {% if current_user.is_admin %} <a href="{% url 'appointments:status' appointment_id=aptmt.appointment_id %}?s=Cancelled">Cancel</a> {% endif %}
			</li>
		{% endfor %}
	</ul>
	<h1>Pending Appointments</h1>
	<ul>
		{% for aptmt in pending_appointments %}
			<li>
				{{ aptmt }} 
				
				{% if current_user.is_admin %} 
					<a href="{% url 'appointments:status' appointment_id=aptmt.appointment_id %}?s=Accepted">Accept</a> 
					<a href="{% url 'appointments:status' appointment_id=aptmt.appointment_id %}?s=Rejected">Reject</a> 
				{% endif %}
			</li>
		{% endfor %}
	</ul>

	{% if user.is_admin %}
	<div class="ui grid container center aligned" style="margin-top: 50px">
		<div class="two column row">
			<div class="column">	
				<div class="ui basic segment">
						<h1>Services Offered</h1>
						<a href="{% url 'dashboard:services' %}">Manage Services</a>
						<ul>
						{% for instance in my_services %}
							<li>{{ instance.service.name }}: {{ instance.price }} </li>
						{% endfor %}
						</ul>
				</div>
			</div>
			<div class="ui vertical divider">and</div>
			<div class="column">
				<div class="ui basic segment">
					<h1>Products Offered</h1>
					<a href="{% url 'dashboard:products' %}">Manage Products</a>
					<ul>
						{% for instance in my_products %}
							<li>{{ instance.product.generic_name }} / {{ instance.product.brand_name }} by {{ instance.product.manufacturer }}: 
								{{ instance.price }} {{ instance.stock }} {{ instance.description }}
							</li>
						{% endfor %}
					</ul>
				</div>
			</div>
		</div>
	</div>
	{% endif %}
</div>

{% endblock %}
