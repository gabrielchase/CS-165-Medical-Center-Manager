{% extends "base.html" %}

{% block content %}

<h1>My Products</h1>

<h1>Add or Update a Product</h1>
<form action="{% url 'dashboard:products' %}" method="POST">
    {% csrf_token %}

    <label for="">Product: </label>
    <select name="product" id="">
        {% if edit_product %}
            <option value="{{ edit_product.product.generic_name }} - {{ edit_product.product.brand_name }}">
                {{ edit_product.product.generic_name }} - {{ edit_product.product.brand_name }}
            </option>
        {% else %}
            <option value="none">--- Select ---</option>
        {% endif%}

        {% for product in other_products %}
            <option value="{{ product.generic_name }} - {{ product.brand_name }}">{{ product.generic_name}} - {{ product.brand_name }}</option>
        {% endfor %}
    </select>
    <br>
    <br>

    <label for="">Price:</label>
    <input type="number" step="0.01" name="price" {% if edit_product %} value="{{ edit_product.price }}" {% endif %} required>
    <br>
    <br>

    <label for="">Stock:</label>
    <input type="number" step="1" name="stock" {% if edit_product %} value="{{ edit_product.stock }}" {% endif %} required>
    <br>
    <br>

    <label for="">Description:</label>
    <input type="text" name="description" {% if edit_product %} value="{{ edit_product.description }}" {% endif %} >
    <br>
    <br>

    <input type="submit" value="Submit" />
</form>

<h1>My Products</h1>
<ul>
    {% for instance in my_products %}
    <li>{{ instance.product.generic_name }} -  {{ instance.product.brand_name }} by
        <strong>{{ instance.product.manufacturer }}</strong>:
        {{ instance.price }} {{ instance.stock}} {{ instance.description}}
        <a href="{% url 'dashboard:products' %}?p={{ instance.product.generic_name }}">Edit</a> 
        <a href="{% url 'dashboard:products-delete' %}?p={{ instance.product.generic_name }}">Delete</a>
    </li>
    {% endfor %}
</ul>

{% endblock %}